<?php
 
 namespace swagboy47\EventManger;
 
use pocketmine\command\Command;
use pocketmine\command\CommandExecutor;
use pocketmine\command\CommandSender;
use pocketmine\event\Listener;
use pocketmine\Player;
use pocketmine\item;
use pocketmine\block;
pocketmine\event\entity\EntityDamageEvent

class Main extends PluginBase implements Listener{
public function onEnable(){
$this->config = new Config($this->getDataFolder()."config.yml", Config::YAML, array());
 $this->enable = true;
 $this->getServer()->getPluginManager()->registerEvents($this, $this);
		}
		public function onCommand(CommandSender $sender, Command $cmd, $label){
		switch($cmd->getName()){
			case "i":
			if(!$this->config->exists($sender->getName()) and $sender->isOp()){
			 $this->config->set($sender->getName());
          $this->config->save();
           $sender->sendMessage("Invulnerability have been enabled for you !");
			else{
			$this->config->remove($sender->getName());
			$sender->sendMessage("Invulnerability have been disabled for you !");
          $this->config->save();
          }
          }
          if(isset($args[0]){
          $player = $this->getPlayer($args[0]);
          if($player->isOnline){
          if(!$this->config->exists($player->getName()) and $sender->isOp()){
			 $this->config->set($player->getName());
          $this->config->save();
           $sender->sendMessage("Invulnerability have been enabled for $player->getName() !");
           $player->sendMessage("Invulnerability have been enabled for you !");
           
			else{
			$this->config->remove($player->getName());
			$player->sendMessage("Invulnerability have been disabled for you !");
			$sender->sendMessage("Invulnerability have been disabled for $player->getName() !");
          $this->config->save();
          }
          }
          }
          }
          }
          }
           /** 
     * @param EntityMoveEvent $data
     * 
     * @priority NORMAL
     * @ignoreCalcelled false
     */
      public function onDamage(EntityDamageEvent $event){
       if(($player = $event->getEntity()) instanceof Player){
       $player1 = $player->getname()
       if($this->config->exists($player1())){
       $event->setCancelled(true);
       }
       }
       }
       }
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
